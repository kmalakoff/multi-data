{"version":3,"sources":["../../src/index.ts"],"names":["MultiData","constructor","boundary","undefined","TypeError","append","name","data","options","lines","push","headers","key","toString","string","join","pop"],"mappings":";;AAQA;AACA;AACA;AACA,eAAe,MAAMA,SAAN,CAAgB;AAI7B;AACF;AACA;AACEC,EAAAA,WAAW,CAACC,QAAD,EAAmB;AAAA;;AAAA,mCALF,EAKE;;AAC5B,QAAIA,QAAQ,KAAKC,SAAjB,EAA4B,MAAM,IAAIC,SAAJ,CAAc,mBAAd,CAAN;AAC5B,SAAKF,QAAL,GAAgBA,QAAhB;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;;;AACEG,EAAAA,MAAM,CAACC,IAAD,EAAeC,IAAf,EAA6BC,OAA7B,EAA2D;AAC/D,QAAIF,IAAI,KAAKH,SAAb,EAAwB,MAAM,IAAIC,SAAJ,CAAc,eAAd,CAAN;AACxB,QAAIG,IAAI,KAAKJ,SAAb,EAAwB,MAAM,IAAIC,SAAJ,CAAc,eAAd,CAAN;AAExB,SAAKK,KAAL,CAAWC,IAAX,CAAiB,KAAI,KAAKR,QAAS,EAAnC;AACA,SAAKO,KAAL,CAAWC,IAAX,CAAiB,yCAAwCJ,IAAK,GAA9D;;AACA,QAAIE,OAAO,IAAIA,OAAO,CAACG,OAAvB,EAAgC;AAC9B,YAAMA,OAAO,GAAGH,OAAO,CAACG,OAAxB;;AACA,WAAK,MAAMC,GAAX,IAAkBD,OAAlB,EAA2B,KAAKF,KAAL,CAAWC,IAAX,CAAiB,GAAEE,GAAI,KAAID,OAAO,CAACC,GAAD,CAAM,EAAxC;AAC5B;;AACD,SAAKH,KAAL,CAAWC,IAAX,CAAgB,EAAhB;AACA,SAAKD,KAAL,CAAWC,IAAX,CAAgBH,IAAhB;AACA,WAAO,IAAP;AACD;AAED;AACF;AACA;;;AACEM,EAAAA,QAAQ,GAAW;AACjB,SAAKJ,KAAL,CAAWC,IAAX,CAAiB,KAAI,KAAKR,QAAS,IAAnC;AACA,UAAMY,MAAM,GAAG,KAAKL,KAAL,CAAWM,IAAX,CAAgB,MAAhB,CAAf;AACA,SAAKN,KAAL,CAAWO,GAAX;AACA,WAAOF,MAAP;AACD;;AA1C4B","sourcesContent":["export interface HeadersObject {\n  [key: string]: string;\n}\n\nexport interface Options {\n  headers?: HeadersObject;\n}\n\n/**\n * Class to build and concatenate multipart form data\n */\nexport default class MultiData {\n  readonly boundary: string;\n  protected lines: string[] = [];\n\n  /**\n   * @param boundary The string used to define multipart boundaries and the end of body.\n   */\n  constructor(boundary: string) {\n    if (boundary === undefined) throw new TypeError(\"boundary expected\");\n    this.boundary = boundary;\n  }\n\n  /**\n   * Append a part to the multipart form data.\n   *\n   * @param name The part name.\n   * @param data The part data.\n   * @param options Pass headers in the options for custom part headers.\n   */\n  append(name: string, data: string, options?: Options): MultiData {\n    if (name === undefined) throw new TypeError(\"name expected\");\n    if (data === undefined) throw new TypeError(\"data expected\");\n\n    this.lines.push(`--${this.boundary}`);\n    this.lines.push(`Content-Disposition: form-data; name=\"${name}\"`);\n    if (options && options.headers) {\n      const headers = options.headers;\n      for (const key in headers) this.lines.push(`${key}: ${headers[key]}`);\n    }\n    this.lines.push(\"\");\n    this.lines.push(data);\n    return this;\n  }\n\n  /**\n   * After appending data, use toString() to concatenate the form data for your request.\n   */\n  toString(): string {\n    this.lines.push(`--${this.boundary}--`);\n    const string = this.lines.join(\"\\r\\n\");\n    this.lines.pop();\n    return string;\n  }\n}\n"],"file":"index.js"}