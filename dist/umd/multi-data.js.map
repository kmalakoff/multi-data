{"version":3,"file":"multi-data.js","sources":["../../src/index.ts"],"sourcesContent":["export interface HeadersObject {\n  [key: string]: string;\n}\n\nexport interface Options {\n  headers?: HeadersObject;\n}\n\n/**\n * Class to build and concatenate multipart form data\n */\nexport default class MultiData {\n  readonly boundary: string;\n  protected lines: string[] = [];\n\n  /**\n   * @param boundary The string used to define multipart boundaries and the end of body.\n   */\n  constructor(boundary: string) {\n    if (boundary === undefined) throw new TypeError('boundary expected');\n    this.boundary = boundary;\n  }\n\n  /**\n   * Append a part to the multipart form data.\n   *\n   * @param name The part name.\n   * @param data The part data.\n   * @param options Pass headers in the options for custom part headers.\n   */\n  append(name: string, data: string, options?: Options): MultiData {\n    if (name === undefined) throw new TypeError('name expected');\n    if (data === undefined) throw new TypeError('data expected');\n\n    this.lines.push(`--${this.boundary}`);\n    this.lines.push(`Content-Disposition: form-data; name=\"${name}\"`);\n    if (options?.headers) {\n      const headers = options.headers;\n      for (const key in headers) this.lines.push(`${key}: ${headers[key]}`);\n    }\n    this.lines.push('');\n    this.lines.push(data);\n    return this;\n  }\n\n  /**\n   * After appending data, use toString() to concatenate the form data for your request.\n   */\n  toString(): string {\n    this.lines.push(`--${this.boundary}--`);\n    const string = this.lines.join('\\r\\n');\n    this.lines.pop();\n    return string;\n  }\n}\n"],"names":["MultiData","boundary","lines","undefined","TypeError","append","name","data","options","push","headers","key","toString","string","join","pop"],"mappings":";;;;;;EAAA,SAAA,eAAA,CAAA,QAAA,EAAA,WAAA,EAAA;;;;;AAWe,MAAMA,SAAS,iBAAf,WAAA;EAAMA,IAAAA,SAAAA,SAAS,CAOhBC,QAAgB,EAAA;;EAL5B,QAAA,IAAA,CAAUC,KAAK,GAAa,EAAG,CAAA;UAM7B,IAAID,QAAQ,KAAKE,SAAS,EAAE,MAAM,IAAIC,SAAS,CAAC,mBAAmB,CAAC,CAAC;EACrE,QAAA,IAAI,CAACH,QAAQ,GAAGA,QAAQ,CAAC;;mBATRD,SAAS,CAAA,SAAA,CAAA;EAY5B;;;;;;EAMC,MACDK,MAAAA,CAAAA,MAAM,GAANA,SAAAA,MAAM,CAACC,IAAY,EAAEC,IAAY,EAAEC,OAAiB,EAAa;UAC/D,IAAIF,IAAI,KAAKH,SAAS,EAAE,MAAM,IAAIC,SAAS,CAAC,eAAe,CAAC,CAAC;UAC7D,IAAIG,IAAI,KAAKJ,SAAS,EAAE,MAAM,IAAIC,SAAS,CAAC,eAAe,CAAC,CAAC;EAE7D,QAAA,IAAI,CAACF,KAAK,CAACO,IAAI,CAAC,IAAG,CAAgB,MAAA,CAAd,IAAI,CAACR,QAAQ,CAAE,CAAC,CAAC;EACtC,QAAA,IAAI,CAACC,KAAK,CAACO,IAAI,CAAC,wCAAuC,CAAO,MAAC,CAANH,IAAI,EAAC,GAAC,CAAC,CAAC,CAAC;UAClE,IAAIE,OAAO,KAAPA,IAAAA,IAAAA,OAAO,KAAS,KAAA,CAAA,GAAhBA,KAAAA,CAAgB,GAAhBA,OAAO,CAAEE,OAAO,EAAE;EACpB,YAAA,IAAMA,OAAO,GAAGF,OAAO,CAACE,OAAO,CAAC;EAChC,YAAA,IAAK,IAAMC,GAAG,IAAID,OAAO,CAAE,IAAI,CAACR,KAAK,CAACO,IAAI,CAAE,EAAA,CAAUC,MAAY,CAApBC,GAAG,EAAC,IAAE,CAAe,CAAA,MAAA,CAAbD,OAAO,CAACC,GAAG,CAAC,CAAE,CAAC,CAAC;EACvE,SAAA;EACD,QAAA,IAAI,CAACT,KAAK,CAACO,IAAI,CAAC,EAAE,CAAC,CAAC;EACpB,QAAA,IAAI,CAACP,KAAK,CAACO,IAAI,CAACF,IAAI,CAAC,CAAC;EACtB,QAAA,OAAO,IAAI,CAAC;EACb,KAAA,CAAA;EAED;;EAEC,MACDK,OAAAA,QAKC,GALDA,SAAAA,QAAQ,GAAW;EACjB,QAAA,IAAI,CAACV,KAAK,CAACO,IAAI,CAAC,IAAG,CAAgB,MAAE,CAAhB,IAAI,CAACR,QAAQ,EAAC,IAAE,CAAC,CAAC,CAAC;UACxC,IAAMY,MAAM,GAAG,IAAI,CAACX,KAAK,CAACY,IAAI,CAAC,MAAM,CAAC,CAAC;EACvC,QAAA,IAAI,CAACZ,KAAK,CAACa,GAAG,EAAE,CAAC;EACjB,QAAA,OAAOF,MAAM,CAAC;EACf,KAAA,CAAA;;GACF;;;;;;;;"}